{% extends "layout.html" %}

{% block title %} Home {% endblock %}

{% block content %}

<p>Click and drag to draw.</p>
<p>Press backspace to clear the last item.</p>

<br>
    <div class="dropdown">
      <button class="dropbtn">Tools</button>
      <div class="dropdown-content">
        <a onclick="pen_tool.activate();">Pen</a>
        <a onclick="circle_tool.activate();">Circle</a>
        <a onclick="text_tool.activate();">Text</a>
      </div>
    </div>

    <h4>Colors:</h4>
    
    <button onclick="color_change('black')">Black</button>
    <button onclick="color_change('red')">Red</button>
    <button onclick="color_change('orange')">Orange</button>
    <button onclick="color_change('gold')">Yellow</button>
    <button onclick="color_change('green')">Green</button>
    <button onclick="color_change('blue')">Blue</button>
    <button onclick="color_change('purple')">Purple</button>

    <h4>Thickness:</h4>

    <button onclick="thick_change(1)">1 px</button>
    <button onclick="thick_change(2)">2 px</button>
    <button onclick="thick_change(3)">3 px</button>
    <button onclick="thick_change(4)">4 px</button>
    <button onclick="thick_change(5)">5 px</button>

<canvas id="myCanvas" width="1000" height="800"></canvas>

<script type="text/javascript">

paper.install(window);

var pen_tool, circle_tool, text_tool, color, thick;
color = 'black'

function color_change(newColor) {
    color = newColor;
}

function thick_change(newThick) {
    thick = newThick
}

window.onload = function() {
    paper.setup("myCanvas");
    var myPath;
    function onMouseDown(event) {
      myPath = new Path();
      myPath.strokeColor = color;
      myPath.strokeWidth = thick;
      myPath.add(event.point);
    }
    
    pen_tool = new Tool();
    pen_tool.onMouseDown = onMouseDown;
    pen_tool.onMouseDrag = function(event) {
        myPath.add(event.point);
        pen_tool.onKeyDown = function(event) {
            if (event.key == "backspace") {
                myPath.removeSegments();
            }
        }
    }

    circle_tool = new Tool();
    circle_tool.onMouseDown = onMouseDown;
    circle_tool.onMouseUp = function(event) {
        var circle = new Path.Circle({
            center: event.middlePoint,
            radius: event.delta.length/2
        });
        circle.strokeColor = color;
        circle.strokeWidth = thick;
        circle_tool.onKeyDown = function(event) {
            if (event.key == "backspace") {
                circle.removeSegments();
            }
        }
    }

    text_tool = new Tool();
    text_tool.onMouseDown = onMouseDown;
    text_tool.onMouseUp = function(event) {
        var text = new PointText({
            point: event.point,
            content: '',
            fillColor: color,
            fontFamily: 'Courier New',
            fontWeight: 'bold',
            fontSize: (10 * thick)
        });
        text_tool.onKeyDown = function(event) {
            text.content += event.character
            if (event.key == "backspace") {
                text.content = '';
            }
        }
    }
    
}




</script>

{% endblock %}
